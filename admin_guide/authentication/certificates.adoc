== Prisma Cloud Compute certificates

This document summarizes all the certificates used by Prisma Cloud Compute. For each certificate, you can learn more about its functionallity, signing CA, and your customization options.

NOTE: Customizing certificates is only allowed for Prisma Cloud Compute Edition.

[cols="10%a, 20%a, 10%a, 20%a, 10%a, 15%a, 15%a", options="header"]
|===
|Category  |Certificate  |Communication  |Certificate customizion  |Default CA |CA customizion  |Prisma Cloud edition

|Console TLS communication
|Console Web and API certificate
|Web browser, API and twistcli access to console
|Customize under *Manage > Authentication > System certificates > TLS certificate for Console > Concatenate public cert and private key*
|Console CA
|Your organization CA
|Compute edition, SAAS?

|xref:../access_control/rbac.adoc[Docker access control]
|Client certificates

To enforce Docker access control, client certs should be installed on any host where the docker client can be run.
|Clients (users) access to remote Docker Engine instances
|Customize your own certificates for your clients

Explicit list of trusted certificates can be defined under *Manage > Authentication > System certificates > Client certificates > Explicit certificate trust list*
|Console CA
|Customize under *Manage > Authentication > System certificates > Client certificates > CA certificate*
|Compute edition, SAAS

|Certificate-based authentication to Console
|
|Clients access the Console 
|
|No CA by default
|Enable Console verification of the client's CA certificate when accessing the Console.

Define CA under *Manage > Authentication > System certificates > Certificate-based authentication to Console > CA certificate*
|Compute edition

|Admission control
|Admission certificate (admission-cert.pem)
|
|Defender CA (defender-ca.pem)
|No
|No
|Compute edition SAAS

|Console-Defender communication
|Defender server certificate (Console side)
|
|Defender CA (defender-ca.pem)
|No
|No
|Compute edition, Using API token in SAAS

|Console-Defender communication
|Defender client certificate (Defender side)
|
|Defender CA (defender-ca.pem)
|No
|No
|Compute edition, Using API token in SAAS

|===

=== Console TLS communication certificates
https://docs.paloaltonetworks.com/prisma/prisma-cloud/21-08/prisma-cloud-compute-edition-admin/configure/custom_certs_console_access.html

HTTP Public Key Pinning (HPKP) was a security feature that used to tell a web client to associate a specific cryptographic public key with a certain web server to decrease the risk of MITM attacks with forged certificates.
Deprecated: This feature is no longer recommended: https://developer.mozilla.org/en-US/docs/Web/HTTP/Public_Key_Pinning

=== Docker role-based access control certificates
https://docs.paloaltonetworks.com/prisma/prisma-cloud/21-08/prisma-cloud-compute-edition-admin/authentication/use_custom_certs_for_auth.html

=== Authentication to Console using certificates
https://docs.paloaltonetworks.com/prisma/prisma-cloud/21-08/prisma-cloud-compute-edition-admin/authentication/use_custom_certs_for_auth.html

Use certificates from an implicitly trusted CA for securing the TLS connection:
[.procedure]
. Open Console, and go to *Manage > Authentication > System Certificates*.

. Open the *Certificate-based authentication to Console* card

. Under *Console Authentication* upload the CA certificate(s) in PEM format, then click *Save*.
+
If you have multiple CAs, such as a root CA and several issuing CAs, you must add all these certificates into the PEM file.
The order of certificates in the PEM file should be from the lowest tier of the hierarchy to the root.
For example, if you have a 3 tier hierarchy that looks like this:
+
  ->RootCA
       ->IntermediateCA
            ->IssuingCA1
            ->IssuingCA2
+
Your PEM file should be ordered as IssuingCA1, IssuingCA2, IntermediateCA, RootCA.
To create such a PEM file, you'd get the public keys of each CA in PEM format and concatenate them together:
+
  $ cat IssuingCA1.pem IssuingCA2.pem IntermediateCA.pem RootCA.pem > CAs.pem
+

=== Admission control certificates

=== Console-Defender communication certificates
