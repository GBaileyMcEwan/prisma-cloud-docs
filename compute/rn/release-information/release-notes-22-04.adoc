== 22.04 Release Notes

The following table outlines the release particulars:

[cols="1,4"]
|===
|Build
|22.04.xxx

|Code name
|Keplar

|Release date
|April xx, 2022

|Type
|Major release

|SHA-256 Digest
|TBD
|===

// Besides hosting the download on the Palo Alto Networks Customer Support Portal, we also support programmatic download (e.g., curl, wget) of the release directly from our CDN:
//
// LINK

* <<_cve-coverage-update,CVE coverage update>>
* <<_new-features-in-the-core-platform,New features in the core platform>>
* <<_new-features-in-container-security,New features in container security>>
* <<_new-features-in-host-security,New features in host security>>
* <<_new-features-in-waas,New features in WAAS>>
* <<_bug-fixes,Addressed issues>>
* <<_disa-stig, DISA STIG scan findings and justifications>>
* <<_breaking-changes,Breaking changes>>
* <<_non-breaking-changes,Changes in existing behavior>>
* <<_known-issues,Known issues>>
* <<_limitations,Limitations>>
* <<_end-of-support-notifications,End of support notifications>>
* <<_backward_compatibility,Backward compatibility limitations for new 22.04 features>> 


[#_cve-coverage-update]
=== CVE coverage update

As part of the 22.04 release, Prisma Cloud has rolled out updates to its vulnerability data stream for Common Vulnerabilities and Exposures (CVEs).
Need to ask Ariel and Sharon's team for any updates here. Keeping it the placeholder for now.

[#_new-features-in-the-core-platform]
=== New features in the core platform

==== New filters in the vulnerability explorer

// #33468

Filters the vulnerabilities based on a set CVSS score and severity threshold or higher. 
You can view the filtered results for container, registry images, hosts, and functions under *Vulnerability (CVE) results*. 
The results reflect the top 100 vulnerabilities based on highest severity and highest CVSS score in an environment.

You can download a detailed report for CVEs in a CSV format from the vulnerability explorer and by using its corresponding API endpoint `GET /stats/vulnerabilities/download`.

image::rn-#33468-new-filters-vuln-explorer.png[width=400]

==== Vulnerabilty scan results for registry images

// #35448

Scans the registry images for vulnerabilities.

You can download a detailed report for impacted resources in a CSV format from the vulnerability explorer and by using its corresponding API endpoint `GET /stats/vulnerabilities/impacted-resources/download`.

image::rn-#35448-registry-images-vuln-explorer.png[width=400]



[#_new-features-in-container-security]
=== New features in container security

====Rule to Allow Actvity in Attached Sessions

// #32874 ( this is marked as a core feature, but I have added it in the container security section because the changes are for containers)

When you start a session inside pods or containers running in your deployment using commands such as kubectl exec or docker exec, you can now explicitly specify whether the rule should allow the activity in attached sessions. This option helps you reduce the volume of alerts generated for the allowed activities and processes.

When enabled, process, network and filesystem activity executed in an attached session such as kubectl exec, is explicitly allowed without additional runtime analysis.

Only Defender versions 22.05 or later will support this capability.

image::rn-#32874-allow-processes.gif[width=400]



[#_new-features-in-host-security]
=== New features in host security



[#_new-features-in-waas]
=== New features in Web Application and API Security (WAAS)

==== IP list button in the Attacker view

// #33293
Adds attacker IP address to an existing or new network list from *Monitor* > *Events* > *Aggregated WAAS events* > *Attacker*.

image::rn-#333293-add-to-ip-list.png[width=400]

==== Regex match groups in the forensic message

// #33428
Matches and displays regex match groups in the forensic message.

image::rn-#33428-regex-match-1.png[width=400]

You can view the matched groups in *Monitor* > *Events* > *Aggregated WAAS events* > *Forensic message*.

image::rn-#33428-regex-match-2.png[width=400]

==== Append or override response header names and values

// #21169
Appends or overrides the response header names and values in the *App definition* when you add or edit a WAAS application.
You can append or override response headers for *Containers*, *Hosts*, and *App Embedded*.

image::rn-#21169-response-headers.png[width=400]

==== View Defender compatibility with custom rules

// #32255
Displays the minimum required or supported Defender version for a custom rule when you add or edit a WAAS application for a custom rule.
You can update the Defender version according to the displayed version.

image::rn-#32255-defender-compatibility.png[width=400]

==== Audit openapi specifications file for issues

// #18554
Audits and detects openapi specifications 2.0 or 3.0 file in JSON or YAML format for structural issues, misconfigurations, and errors.

You can upload an openapi specification file from *Monitor* > *WAAS* > *API definition scan* > *Upload API file*.

image::rn-#18554-audit-openapi-spec.png[width=400]

==== Out of band traffic discovery

// #33155
Inspects the HTTP request or response for out of band traffic, and provides discovery and detection.

You can configure *out of band traffic* custom rule for a WAAS application from *Defend* > *WAAS* > *Out of band*.

You can use the corresponding API `PUT policies/firewall/app/out-of-band` to edit a custom rule for *out of band traffic*.

image::rn-#33155-out-of-band.png[width=400]

For *out of band traffic* observations, go to *Monitor* > *WAAS* > *API observations* > *Out of band observations* in the Console.
Or, use API `GET policies/firewall/app/out-of-band` to discover and detect out of band traffic for an existing rule.

You can also fetch impacted resources list from `GET policies/firewall/app/out-of-band/impacted`.

image::rn-#32874-allow-processes.gif[width=400]

==== WAAS actions for HTTP messages that exceeds body inspection limit

// #23295
Applies WAAS actions such as *Disable*, *Alert*, *Prevent*, or *Ban* for HTTP messages that exceeds the body inspection limit for custom rules under *Defend* > *WAAS* > {*Container* | *Host* | *App Embedded*}.

You can apply WAAS actions such as *Disable* or *Alert* for HTTP messages that exceeds the body inspection limit for custom rules under *Defend* > *WAAS* > *Out of band*.

image::rn-#23295-waas-actions-body-limit.png[width=400]

==== New WAAS proxy error statistics in WAAS connectivity monitor

// #34153
Displays WAAS proxy error statistics such as blocked requests, inspection limit exceeded, and parsing errors in *Radar* > *WAAS connectivity monitor*.

image::rn-#34153-proxy-error-statistics.png[width=400]

==== Automatically detect ports of WAAS applications for Containers or Hosts

// #35688
Detects WAAS application ports automatically for Containers or Hosts.

You can enable the feature when you add or edit an application for a WAAS custom rule.

image::rn-#35688-auto-detect-ports.png[width=400]


=== Deprecated this release

// #37351, #37356
* The backward compatibility using *pagination* and *resource type* query parameters in the `GET /stats/vulnerabilities/impacted-resources` API endpoint has been deprecated.